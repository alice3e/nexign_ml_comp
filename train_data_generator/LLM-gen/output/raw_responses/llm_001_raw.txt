```xml
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             id="definitions_1"
             targetNamespace="http://bpmn.io/schema/bpmn">
  
  <process id="process_pokupka" isExecutable="false">
    <!-- Пул Покупатель -->
    <laneSet id="lane_set_1">
      <lane id="lane_pokupatel" name="Покупатель">
        <flowNodeRef>start_1</flowNodeRef>
        <flowNodeRef>user_task_1</flowNodeRef>
        <flowNodeRef>user_task_2</flowNodeRef>
        <flowNodeRef>user_task_3</flowNodeRef>
        <flowNodeRef>user_task_4</flowNodeRef>
        <flowNodeRef>user_task_5</flowNodeRef>
        <flowNodeRef>intermediate_throw_1</flowNodeRef>
        <flowNodeRef>intermediate_catch_1</flowNodeRef>
        <flowNodeRef>intermediate_catch_2</flowNodeRef>
        <flowNodeRef>end_1</flowNodeRef>
      </lane>
      
      <!-- Пул Система магазина -->
      <lane id="lane_sistema" name="Система магазина">
        <flowNodeRef>service_task_1</flowNodeRef>
        <flowNodeRef>gateway_xor_1</flowNodeRef>
        <flowNodeRef>service_task_2</flowNodeRef>
        <flowNodeRef>service_task_3</flowNodeRef>
        <flowNodeRef>gateway_xor_2</flowNodeRef>
        <flowNodeRef>service_task_4</flowNodeRef>
        <flowNodeRef>service_task_5</flowNodeRef>
        <flowNodeRef>gateway_and_1</flowNodeRef>
        <flowNodeRef>service_task_6</flowNodeRef>
        <flowNodeRef>service_task_7</flowNodeRef>
        <flowNodeRef>gateway_and_2</flowNodeRef>
        <flowNodeRef>service_task_8</flowNodeRef>
        <flowNodeRef>intermediate_throw_2</flowNodeRef>
        <flowNodeRef>intermediate_throw_3</flowNodeRef>
        <flowNodeRef>intermediate_catch_3</flowNodeRef>
      </lane>
      
      <!-- Пул Служба доставки -->
      <lane id="lane_dostavka" name="Служба доставки">
        <flowNodeRef>service_task_9</flowNodeRef>
        <flowNodeRef>service_task_10</flowNodeRef>
        <flowNodeRef>service_task_11</flowNodeRef>
        <flowNodeRef>intermediate_throw_4</flowNodeRef>
      </lane>
    </laneSet>

    <!-- Start Event -->
    <startEvent id="start_1" name="Начало покупки"/>
    
    <!-- User Tasks (Покупатель) -->
    <userTask id="user_task_1" name="Выбор товаров и добавление в корзину"/>
    <userTask id="user_task_2" name="Оформление заказа и указание адреса"/>
    <userTask id="user_task_3" name="Выбор способа оплаты"/>
    <userTask id="user_task_4" name="Оплата при получении"/>
    <userTask id="user_task_5" name="Подтверждение получения товара"/>
    
    <!-- Service Tasks (Система) -->
    <serviceTask id="service_task_1" name="Проверка наличия товара"/>
    <serviceTask id="service_task_2" name="Предложение альтернатив"/>
    <serviceTask id="service_task_3" name="Резервирование товара"/>
    <serviceTask id="service_task_4" name="Обработка онлайн платежа"/>
    <serviceTask id="service_task_5" name="Создание заказа"/>
    <serviceTask id="service_task_6" name="Формирование накладной"/>
    <serviceTask id="service_task_7" name="Отправка информации в службу доставки"/>
    <serviceTask id="service_task_8" name="Закрытие заказа"/>
    
    <!-- Service Tasks (Доставка) -->
    <serviceTask id="service_task_9" name="Получение заказа"/>
    <serviceTask id="service_task_10" name="Планирование маршрута"/>
    <serviceTask id="service_task_11" name="Доставка товара"/>
    
    <!-- Gateways -->
    <exclusiveGateway id="gateway_xor_1" name="Товар в наличии?"/>
    <exclusiveGateway id="gateway_xor_2" name="Способ оплаты"/>
    <parallelGateway id="gateway_and_1" name="Параллельные действия"/>
    <parallelGateway id="gateway_and_2" name="Синхронизация"/>
    
    <!-- Intermediate Events -->
    <intermediateThrowEvent id="intermediate_throw_1" name="Заказ оформлен"/>
    <intermediateCatchEvent id="intermediate_catch_1" name="Уведомление о создании заказа"/>
    <intermediateCatchEvent id="intermediate_catch_2" name="Товар доставлен"/>
    <intermediateThrowEvent id="intermediate_throw_2" name="Информация для доставки"/>
    <intermediateThrowEvent id="intermediate_throw_3" name="Уведомление покупателю"/>
    <intermediateCatchEvent id="intermediate_catch_3" name="Подтверждение получения"/>
    <intermediateThrowEvent id="intermediate_throw_4" name="Товар доставлен"/>
    
    <!-- End Event -->
    <endEvent id="end_1" name="Заказ завершен"/>
    
    <!-- Sequence Flows -->
    <sequenceFlow id="flow_1" sourceRef="start_1" targetRef="user_task_1"/>
    <sequenceFlow id="flow_2" sourceRef="user_task_1" targetRef="user_task_2"/>
    <sequenceFlow id="flow_3" sourceRef="user_task_2" targetRef="intermediate_throw_1"/>
    <sequenceFlow id="flow_4" sourceRef="intermediate_throw_1" targetRef="service_task_1"/>
    <sequenceFlow id="flow_5" sourceRef="service_task_1" targetRef="gateway_xor_1"/>
    <sequenceFlow id="flow_6" sourceRef="gateway_xor_1" targetRef="service_task_2" name="Нет в наличии"/>
    <sequenceFlow id="flow_7" sourceRef="gateway_xor_1" targetRef="service_task_3" name="В наличии"/>
    <sequenceFlow id="flow_8" sourceRef="service_task_3" targetRef="intermediate_catch_1"/>
    <sequenceFlow id="flow_9" sourceRef="intermediate_catch_1" targetRef="user_task_3"/>
    <sequenceFlow id="flow_10" sourceRef="user_task_3" targetRef="gateway_xor_2"/>
    <sequenceFlow id="flow_11" sourceRef="gateway_xor_2" targetRef="service_task_4" name="Онлайн оплата"/>
    <sequenceFlow id="flow_12" sourceRef="gateway_xor_2" targetRef="user_task_4" name="При получении"/>
    <sequenceFlow id="flow_13" sourceRef="service_task_4" targetRef="service_task_5"/>
    <sequenceFlow id="flow_14" sourceRef="service_task_5" targetRef="gateway_and_1"/>
    <sequenceFlow id="flow_15" sourceRef="gateway_and_1" targetRef="service_task_6"/>
    <sequenceFlow id="flow_16" sourceRef="gateway_and_1" targetRef="service_task_7"/>
    <sequenceFlow id="flow_17" sourceRef="service_task_6" targetRef="gateway_and_2"/>
    <sequenceFlow id="flow_18" sourceRef="service_task_7" targetRef="gateway_and_2"/>
    <sequenceFlow id="flow_19" sourceRef="gateway_and_2" targetRef="intermediate_throw_3"/>
    <sequenceFlow id="flow_20" sourceRef="intermediate_throw_3" targetRef="intermediate_throw_2"/>
    <sequenceFlow id="flow_21" sourceRef="intermediate_throw_2" targetRef="service_task_9"/>
    <sequenceFlow id="flow_22" sourceRef="service_task_9" targetRef="service_task_10"/>
    <sequenceFlow id="flow_23" sourceRef="service_task_10" targetRef="service_task_11"/>
    <sequenceFlow id="flow_24" sourceRef="service_task_11" targetRef="intermediate_throw_4"/>
    <sequenceFlow id="flow_25" sourceRef="intermediate_throw_4" targetRef="intermediate_catch_2"/>
    <sequenceFlow id="flow_26" sourceRef="intermediate_catch_2" targetRef="user_task_5"/>
    <sequenceFlow id="flow_27" sourceRef="user_task_5" targetRef="intermediate_catch_3"/>
    <sequenceFlow id="flow_28" sourceRef="intermediate_catch_3" targetRef="service_task_8"/>
    <sequenceFlow id="flow_29" sourceRef="service_task_8" targetRef="end_1"/>
    <sequenceFlow id="flow_30" sourceRef="service_task_2" targetRef="end_1"/>
    <sequenceFlow id="flow_31" sourceRef="user_task_4" targetRef="intermediate_catch_2"/>
  </process>
  
  <bpmndi:BPMNDiagram id="diagram_1">
    <bpmndi:BPMNPlane id="plane_1" bpmnElement="process_pokupka">
      <bpmndi:BPMNShape id="shape_start_1" bpmnElement="start_1" dc:Bounds="30,150,36,36"/>
      <bpmndi:BPMNShape id="shape_user_task_1" bpmnElement="user_task_1" dc:Bounds="100,130,100,80"/>
      <bpmndi:BPMNShape id="shape_user_task_2" bpmnElement="user_task_2" dc:Bounds="240,130,100,80"/>
      <bpmndi:BPMNShape id="shape_user_task_3" bpmnElement="user_task_3" dc:Bounds="600,130,100,80"/>
      <bpmndi:BPMNShape id="shape_user_task_4" bpmnElement="user_task_4" dc:Bounds="800,250,100,80"/>
      <bpmndi:BPMNShape id="shape_user_task_5" bpmnElement="user_task_5" dc:Bounds="1100,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_1" bpmnElement="service_task_1" dc:Bounds="380,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_2" bpmnElement="service_task_2" dc:Bounds="520,250,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_3" bpmnElement="service_task_3" dc:Bounds="520,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_4" bpmnElement="service_task_4" dc:Bounds="740,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_5" bpmnElement="service_task_5" dc:Bounds="880,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_6" bpmnElement="service_task_6" dc:Bounds="1020,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_7" bpmnElement="service_task_7" dc:Bounds="1020,250,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_8" bpmnElement="service_task_8" dc:Bounds="1240,130,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_9" bpmnElement="service_task_9" dc:Bounds="1020,370,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_10" bpmnElement="service_task_10" dc:Bounds="1160,370,100,80"/>
      <bpmndi:BPMNShape id="shape_service_task_11" bpmnElement="service_task_11" dc:Bounds="1300,370,100,80"/>
      <bpmndi:BPMNShape id="shape_gateway_xor_1" bpmnElement="gateway_xor_1" dc:Bounds="485,145,50,50"/>
      <bpmndi:BPMNShape id="shape_gateway_xor_2" bpmnElement="gateway_xor_2" dc:Bounds="705,145,50,50"/>
      <bpmndi:BPMNShape id="shape_gateway_and_1" bpmnElement="gateway_and_1" dc:Bounds="985,145,50,50"/>
      <bpmndi:BPMNShape id="shape_gateway_and_2" bpmnElement="gateway_and_2" dc:Bounds="1185,145,50,50"/>
      <bpmndi:BPMNShape id="shape_intermediate_throw_1" bpmnElement="intermediate_throw_1" dc:Bounds="355,158,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_catch_1" bpmnElement="intermediate_catch_1" dc:Bounds="625,158,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_catch_2" bpmnElement="intermediate_catch_2" dc:Bounds="1045,158,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_throw_2" bpmnElement="intermediate_throw_2" dc:Bounds="1125,298,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_throw_3" bpmnElement="intermediate_throw_3" dc:Bounds="1125,158,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_catch_3" bpmnElement="intermediate_catch_3" dc:Bounds="1205,158,36,36"/>
      <bpmndi:BPMNShape id="shape_intermediate_throw_4" bpmnElement="intermediate_throw_4" dc:Bounds="1405,398,36,36"/>
      <bpmndi:BPMNShape id="shape_end_1" bpmnElement="end_1" dc:Bounds="1370,150,36,36"/>
      <bpmndi:BPMNShape id="shape_lane_pokupatel" bpmnElement="lane_pokupatel" dc:Bounds="20,80,1420,100" isHorizontal="true"/>
      <bpmndi:BPMNShape id="shape_lane_sistema" bpmnElement="lane_sistema" dc:Bounds="20,200,1420,100" isHorizontal="true"/>
      <bpmndi:BPMNShape id="shape_lane_dostavka" bpmnElement="lane_dostavka" dc:Bounds="20,320,1420,100" isHorizontal="true"/>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
```

```markdown
# Описание процесса: Покупка товара в интернет-магазине

## Общая информация
- **Домен**: электронная коммерция / ритейл
- **Участники**: Покупатель, Система интернет-магазина, Служба доставки
- **Цель**: Обеспечение полного цикла покупки товара от выбора до получения и подтверждения

## Описание процесса

### Основной поток
1. **Старт**: Начало процесса покупки товара
2. **Выбор товаров**: Покупатель выбирает товары и добавляет их в корзину
3. **Оформление заказа**: Покупатель оформляет заказ и указывает адрес доставки
4. **Проверка наличия**: Система проверяет наличие товара на складе
5. **Резервирование**: Если товар в наличии - система резервирует товар
6. **Выбор оплаты**: Покупатель выбирает способ оплаты (онлайн или при получении)
7. **Создание заказа**: Система создает заказ и уведомляет покупателя

### Ветвления и условия
- **Условие наличия товара**: 
  - Если товар есть в наличии → резервирование и продолжение процесса
  - Если товара нет → предложение альтернатив и завершение процесса
  
- **Условие оплаты**:
  - Онлайн оплата → обработка платежа системой
  - Оплата при получении → оплата курьеру при доставке

- **Параллельное выполнение**: После создания заказа одновременно выполняются:
  - Формирование накладной
  - Отправка информации в службу доставки

### Взаимодействие с доставкой
1. Служба доставки получает информацию о заказе
2. Планирование маршрута доставки
3. Доставка товара покупателю
4. Уведомление системы о доставке

### Завершение
- **Получение товара**: Покупатель получает товар и подтверждает получение
- **Закрытие заказа**: Система закрывает заказ после подтверждения получения
- **Альтернативное завершение**: Если товара нет - процесс завершается после предложения альтернатив

## Особенности
- **Три пула участников** с четким разделением ответственности
- **MessageFlow между пулами** для передачи информации между участниками
- **XOR Gateway** для проверки наличия товара и выбора способа оплаты
- **Parallel Gateway** для параллельного выполнения задач после создания заказа
- **Промежуточные события** для уведомлений и синхронизации процессов
- **Два основных сценария**: успешная покупка и отказ из-за отсутствия товара

Процесс охватывает полный цикл от выбора товара до его получения и подтверждения, включая взаимодействие между всеми участниками цепочки поставок.
```