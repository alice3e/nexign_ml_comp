# Описание процесса: Покупка товара в интернет-магазине

## Общая информация
- **Домен**: электронная коммерция / ритейл
- **Участники**: Покупатель, Система интернет-магазина, Служба доставки
- **Цель**: Обеспечение полного цикла покупки товара от выбора до получения и подтверждения

## Описание процесса

### Основной поток
1. **Старт**: Начало процесса покупки товара
2. **Выбор товаров**: Покупатель выбирает товары и добавляет их в корзину
3. **Оформление заказа**: Покупатель оформляет заказ и указывает адрес доставки
4. **Проверка наличия**: Система проверяет наличие товара на складе
5. **Резервирование**: Если товар в наличии - система резервирует товар
6. **Выбор оплаты**: Покупатель выбирает способ оплаты (онлайн или при получении)
7. **Создание заказа**: Система создает заказ и уведомляет покупателя

### Ветвления и условия
- **Условие наличия товара**: 
  - Если товар есть в наличии → резервирование и продолжение процесса
  - Если товара нет → предложение альтернатив и завершение процесса
  
- **Условие оплаты**:
  - Онлайн оплата → обработка платежа системой
  - Оплата при получении → оплата курьеру при доставке

- **Параллельное выполнение**: После создания заказа одновременно выполняются:
  - Формирование накладной
  - Отправка информации в службу доставки

### Взаимодействие с доставкой
1. Служба доставки получает информацию о заказе
2. Планирование маршрута доставки
3. Доставка товара покупателю
4. Уведомление системы о доставке

### Завершение
- **Получение товара**: Покупатель получает товар и подтверждает получение
- **Закрытие заказа**: Система закрывает заказ после подтверждения получения
- **Альтернативное завершение**: Если товара нет - процесс завершается после предложения альтернатив

## Особенности
- **Три пула участников** с четким разделением ответственности
- **MessageFlow между пулами** для передачи информации между участниками
- **XOR Gateway** для проверки наличия товара и выбора способа оплаты
- **Parallel Gateway** для параллельного выполнения задач после создания заказа
- **Промежуточные события** для уведомлений и синхронизации процессов
- **Два основных сценария**: успешная покупка и отказ из-за отсутствия товара

Процесс охватывает полный цикл от выбора товара до его получения и подтверждения, включая взаимодействие между всеми участниками цепочки поставок.